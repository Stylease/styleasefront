<section class="md-whiteframe-z1 users">
  <md-list ng-cloak>
    <div class="clearfix">
      <md-subheader class="md-no-sticky all-user">{{json.title}}</md-subheader>
      <div class="flex search-bar" flex="33">
        <md-autocomplete md-search-text="pagination.search" md-items="result in json.tableData track by $index" md-min-length="0" md-search-text-change="getMoreResults();" placeholder="Search" class="layout-lg">
        </md-autocomplete>
      </div>
    </div>
    <md-divider></md-divider>
    <md-content flex="" ng-show="json.tableData.length>=0 " layout-padding="">
      <md-card ng-repeat="result in json.tableData">
        <md-list-item class="ls-head secondary-button-padding padlr16">
          <p ng-repeat="field in json.fields" ng-if="field.type!==''">{{field.name}}</p>
          <md-button aria-label="Expand" class="md-icon-button" ng-repeat="action in json.action">
            <ng-md-icon class="" icon="{{action.icon}}" size="20" style="fill:black;"></ng-md-icon>
          </md-button>
        </md-list-item>
        <div ng-hide="json.tableData.length>=0 || json.tableData.cart.length>=0" class="loadingbox">
          Loading...
        </div>
        <md-list-item class="secondary-button-padding padlr16">
          <p ng-repeat="field in json.fields" ng-if="field.type !==''" class="word-b">
            <span ng-if="field.type!='image' && result|getValue:field.tableRef:field.type!=''">{{result|getValue:field.tableRef:field.type}}</span>
            <span ng-if="field.type!='image' && result|getValue:field.tableRef:field.type ==''"></span>
            <span class="img-holder" ng-if="field.type=='image'">
                        <img width="200" ng-src="{{result|getValue:field.tableRef:field.type}}" alt="" >
        </span>
          </p>
          <md-button aria-label="Expand" class="md-icon-button" ng-repeat="action in json.action" ng-click="performAction(action,result)">
            <ng-md-icon class="" icon="{{action.icon}}" size="20" style="fill:{{action.color}};"></ng-md-icon>
          </md-button>
        </md-list-item>
        <md-list ng-cloak ng-repeat="field in json.fields " ng-if="field.display=='table'">
          <md-list-item style="border-bottom: 1px solid #CBCACA;" class=" firstpro secondary-button-padding padlr16">

            <p ng-repeat="heading in json.tableFields">{{heading.name}}</p>
          </md-list-item>

          <md-list-item ng-repeat="cartpro in result.cartproduct" class="firstpro secondary-button-padding padlr16">
            <p ng-repeat="values in json.tableFields">
              <span ng-if="values.type==='product'">{{cartpro.product.name}}</span>
              <span ng-if="values.type==='price'"><span ng-if="cartpro.duration==='4'">{{cartpro.product.fourdayrentalamount}}</span><span ng-if="cartpro.duration==='8'">{{cartpro.product.eightdayrentalamount}}</span></span>
              <span ng-if="values.type!='date'">{{cartpro[values.model]}}</span>
              <span ng-if="values.type=='date'">{{cartpro[values.model] | date:'dd-MM-yyyy'}}</span>
            </p>
          </md-list-item>
        </md-list>
      </md-card>
    </md-content>


    <uib-pagination ng-if="json.tableData.length>0" total-items="pageInfo.totalitems" ng-model="pagination.pagenumber" class="pagination-sm" boundary-link-numbers="true" items-per-page="pagination.pagesize" ng-change="getMoreResults();" max-size="pageInfo.totalitems"
      ng-hide="pageInfo.lastpage==1"></uib-pagination>


  </md-list>
  <a ui-sref="{{json.createButtonState}}" ng-if="json.createButtonState">
    <!-- <a ui-sref="{{json.create.createButtonState}}" ng-if="json.create"> -->
    <md-button class="md-fab md-fab-bottom-right md-primary" aria-label="Add Users">
      <md-icon class="fa fa-plus plus-icon"></md-icon>
    </md-button>
  </a>
</section>
